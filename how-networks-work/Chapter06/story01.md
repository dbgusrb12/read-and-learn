# 서버의 개요

## 클라이언트와 서버의 차이점

클라이언트와 서버는 네트워크에 관한 부분은 같지만, 용도에 따라 다양한 서버 머신의 종류가 있으며, 하드웨어나 OS 부분은 다르다.

네트워크에 관한 부분, LAN 어댑터, 프로토콜 스택, Socket 라이브러리 등의 기능이 같아도 사용하는 방법까지 같은 것은 아닌데,  
접속 동작을 할 때 클라이언트에서는 접속 동작을 수행하고, 서버는 그걸 기다리는 형태가 되므로 Socket 라이브러리의 사용법이 조금 달라진다.  
그래서 애플리케이션이 호출하는 Socket 라이브러리의 프로그램 부품이 다른 것이다.

또한 서버의 애플리케이션은 동시에 다수의 클라이언트 PC와 대화한다는 차이점이 있기 때문에 서버 애플리케이션은 클라이언트 애플리케이션과 구조가 다르다.

## 서버 애플리케이션의 구조

서버는 복수의 클라이언트와 동시에 통신 동작을 실행하지만, 하나의 프로그램으로 여러 클라이언트들의 상대를 처리하기는 어렵다.  
때문에 클라이언트가 접속할 때마다 새로 서버 프로그램을 작동하여 서버 애플리케이션과 클라이언트가 1:1로 대화하는 방법을 선택하는 것이 일반적이다.

먼저 서버 프로그램의 접속을 기다리는 부분과 클라이언트와 대화하는 부분, 둘로 나누어 서버 프로그램을 만든다.  
그 후 서버 프로그램을 작동해서 설정 파일 읽기 등의 초기화 동작을 마쳤을 때 접속을 기다리는 부분을 실행한다.  
그러면 해당 부분이 소켓을 작성하고 소켓을 클라이언트에서의 접속 동작을 기다리는 상태로 만든 채 쉬는 상태가 되는데,  
그 이후 클라이언트가 접속했을 때 다시 작동하여 접속을 기다리고, 클라이언트와 대화하는 부분을 작동시켜 해당 부분에 접속이 끝난 소켓을 건네주고  
동작을 계속하면 클라이언트와 대화하는 부분은 접속이 끝난 소켓을 사용하여 클라이언트와 대화하기 시작한다. 대화가 끝나면 연결을 끊고 이 부분이 종료된다.

클라이언트가 대화하는 부분은 새 클라이언트가 접속할 때마다 생성되어 기동하므로 한 대의 클라이언트와 1:1로 대응을 한다. 이렇게 하면  
다른 클라이언트의 일에 신경쓰지 않고 자신에 대응하는 클라이언트만 상대하면 되기 때문이다.  

서버 OS는 멀티태스크 또는 멀티스레드라는 기능에 의해 다수의 프로그램을 동시에 함께 작동 할 수 있는데, 이 성질을 이용한 프로그래밍 기법이다.

이러한 방법은 클라이언트가 접속했을 때 새로 프로그램을 기동하는 부분에서 다소 시간이 걸리고, 응답 시간이 추가로 소요된다는 단점이 있기 때문에,  
미리 클라이언트와 대화하는 몇 개의 부분을 작동시켜 두고 클라이언트가 접속했을 때 클라이언트의 상대를 처리하지 않는 비어있는 것을 찾아 접속한 소켓을  
건네주어 클라이언트와 대화를 계속하는 방법도 있다.

## 서버측의 소켓과 포트 번호

