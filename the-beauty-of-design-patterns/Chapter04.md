# 04. 코딩 규칙

설계 원칙과 디자인 패턴은 추상적인 경우가 많으며 사용 시 개인의 경험에 크게 의존하므로 부적절하게 사용하면 역효과가 날 수 있다.  
반면 코딩 규칙은 간단하고 명확하며, 코드의 세부 사항에 집중하고, 쉽게 적용 가능하다.

## 4.1 명명과 주석

### 긴 이름과 짧은 이름

- 일반적인 약어를 사용할 수 있지만, 주의해서 사용해야 한다.
- 임시 변수와 같이 사용 범위가 비교적 작은 변수는 짧은 이름을 사용할 수 있다.
- 전역 변수와 같이 범위가 큰 변수의 경우 긴 이름을 사용하는 것이 좋다.

### 문맥 정보를 사용한 명명 단순화

멤버 변수를 사용할 때는 객체의 컨텍스트 정보를 통해 명확하게 표현할 수 있다.

```java
User user = new User();
// user.getUserName();
user.getName(); // user 객체의 컨텍스트 정보를 통해 user의 name임을 알 수 있다.
```

또는 함수에 대한 컨텍스트 정보를 사용하여 함수 매개변수의 이름을 단순화할 수도 있다.

```java
public void uploadUserAvatarImageToAws(String userAvatarImageUri);
// 컨텍스트 정보를 활용하여 단순화
public void uploadUserAvatarImageToAws(String avatarImageUri);
```

### 비즈니스 용어집을 사용한 명명 통일

통일된 비즈니스 용어집을 준비해두면 동일한 비즈니스 용어의 번역이 달라지지 않기 때문에 코드의 가독성이 떨어지지 않는다.  

### 명명은 정확하지만 추상적이어야 한다.

프로젝트에 광범위한 단어를 포함하는 이름이 많을 경우, 이러한 이름이 정확한지, 좀 더 구체적인 의미의 다른 단어로 바꿔야 하는지 여부를 고려해야 한다.  
명명은 구현 세부 사항을 너무 구체적으로 명시하지 않고 작업 방법이 아닌 작업 자체만 명시하면 된다.

적당한 이름을 찾지 못하면 팀 내 토론을 거치거나 우수한 오픈소스 프로젝트의 명명 방법을 참조할 수 있다.

### 주석에 반드시 포함되어야 하는 것들

일부 프로그래머는 좋은 명명이 주석을 완전히 대체할 수 있으며,  
만약 코드에 주석이 필요하다면 명명이 충분히 적합하지 않다는 뜻이므로, 주석을 추가하는 대신 명명을 다시 고려해야 한다고 말한다.

하지만 이러한 견해는 매우 편향적일 수 있다.  
명명을 아무리 잘해도 길이 제한이 있고, 모든 것을 담을 수 없기 때문이다.

주석은 주로 `무엇(What)`을 하는지, `왜(Why)` 하는지, `어떻게(How)` 하는지 3가지 측면을 담고있다.

```java
/**
 * (what) Bean을 생성하는 데 사용되는 팩터리 클래스
 * 
 * (why) 이 클래스의 기능은 Spring IoC 프레임워크와 비슷하지만 더 가볍다.
 * 
 * (how) 다른 데이터 소스에서 다음 순서로 Bean을 생성한다.
 * 사용자 지정 객체 -> SPI -> 설정 파일 -> 기본 객체
 */
public class BeansFactory {
    ...
}
```

- 주석에는 이름보다 훨씬 더 많은 정보를 담을 수 있다.
- 주석은 설명과 시연의 역할을 한다.
- 요약 주석은 코드의 논리를 더 명확하게 할 수 있다.

### 주석이 많다고 좋은 것은 아니다.

주석이 너무 많으면 코드의 가독성이 떨어진다는 것을 의미한다.  
또한 코드를 수정한 후, 주석을 수정하지 않았다면 그 순간부터 주석과 코드의 논리가 일치하지 않고, 이는 더 많은 문제를 야기시킬 수 있다.  
클래스, 함수, 멤버 변수에 대해서는 자세한 주석을 작성하는 것이 필요하지만,  
지역 변수와 같은 함수 내부의 코드나 함수 내부의 각 명령문에 대해서는 가능한 주석을 줄이고 좋은 명명, 기능 분할, 설명 변수로 대체 할 수 있다.

## 4.2 코드 스타일

팀이나 프로젝트 전체에서 코드 스타일을 일관되게 유지하는 것이 중요하다. 

### 클래스, 함수의 적절한 크기

클래스나 함수의 크기는 몇 줄이어야 적당한 것인지에 대한 명확하고 수치화할 수 있는 표준은 없다.

일부 프로그래머는 함수의 크기가 디스플레이가 한 번에 표시할 수 있는 줄 수를 넘어서는 안된다고 생각한다.  
함수에 포함된 모든 코드를 한 화면에 표시하려면 코드가 50줄을 초과할 수 없다.  
함수의 내용을 파악하기 위해 계속 화면을 스크롤해야 하는 것은 좋은 코드 리딩 경험이라고 할 수 없다.

클래스의 경우 아래 예시를 기준으로 클래스의 크기가 너무 크다고 생각할 수 있다.

- 클래스의 코드를 읽기 어렵다고 느낄 경우
- 함수를 구현할 때 클래스의 어떤 함수를 사용해야 할지 모르는 경우
- 적당한 함수를 찾는 데 시간이 오래 걸리는 경우
- 거대한 클래스에서 실제로 사용하는 함수는 매우 작은 경우

### 한 줄의 적절한 길이

한 줄의 적당한 길이는 가급적 IDE 의 표시 너비를 초과해서는 안된다.

### 빈 줄을 활용한 코드 블럭 구분

클래스의 멤버 변수와 함수 사이, 정적 멤버 변수와 일반 멤버 변수 사이, 함수 사이, 멤버 변수 사이에 빈 줄을 추가하여  
모듈간의 경계와 코드의 전체 구조를 더 명확하게 정리할 수 있다.

### 클래스의 멤버 순서

클래스에서 멤버 변수는 일반적으로 함수 앞에 놓는다.  
정적 멤버 변수 또는 정적 함수가 먼저 놓이고 뒤에 비정적 멤버 변수와 비정적 함수가 놓인다.  
멤버 변수와 함수는 범위 내림차순으로 정렬되므로 `public` -> `protected` -> `private` 순으로 놓는다.  
`public` 함수가 `private` 함수를 호출하면 이 두 함수를 함께 배열할 수 있다.

## 4.3 코딩 팁

### 복잡한 코드의 모듈화

복잡한 코드의 커다란 블럭을 클래스나 함수로 캡슐화하는데 능숙해져야 한다.

### 함수의 매개변수 관리

- 함수에 매개변수가 너무 많은 이유가 함수의 책임이 단일하지 않기 때문이라면 함수를 여러 함수로 분할하여 매개변수를 줄일 수 있다.  
- 매개변수를 객체로 캡슐화하는 방법으로 해결할 수 있다.

### 함수의 플래그 매개변수 제거

함수에서 `boolean` 형식의 플래그 매개변수를 통해 값을 받고, 이 값이 `true` 일 때 실행하는 코드와 `false` 일 때 실행하는 코드가 다르도록 설계하면 안된다.  
이는 단일 책임 원칙과 인터페이스 분리 원칙을 위반하기 때문이다.

플래그를 포함하는 함수를 두 개의 함수로 분할하는 것이 좋다.

하지만 함수의 영향 범위가 제한된 전용 함수이거나 분할 후 두 함수가 자주 동시에 호출되는 경우 플래그 매개변수를 유지하는 것을 고려할 수 있다.

또는 매개변수가 null 인지에 따라 내부 논리를 제어하는 경우 이 기능을 여러개로 분할해야 한다.    
분할 후 함수의 책임이 명확해지기 때문이다.

### 깊은 중첩 코드 제거

- **중복되는 if, else 문을 제거한다.**
- **`continue`, `break`, `return` 키워드를 사용하여 중첩을 바로 종료한다.**
- **실행 순서를 조정하여 중첩 단계를 줄인다.**
- **중첩 단계를 줄이기 위해 코드의 일부를 함수로 캡슐화 한다.**

### 설명 변수

- 매직 넘버 대신 상수를 사용한다.
- 설명 변수를 사용하여 복잡한 표현을 설명한다.
